(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{3374:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var r=n(6658),o=n(9242);let i=(0,o.createContext)(null);function a(){let e=(0,o.use)(i);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var l=n(523),u=n.n(l);let s=(0,o.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:a,id:u,placeholder:s,style:c,whenReady:f,zoom:d,...p},m){let[g]=(0,o.useState)({className:a,id:u,style:c}),[h,A]=(0,o.useState)(null),v=(0,o.useRef)(void 0);(0,o.useImperativeHandle)(m,()=>h?.map??null,[h]);let y=(0,o.useCallback)(r=>{if(null!==r&&!v.current){let o=new l.Map(r,p);v.current=o,null!=n&&null!=d?o.setView(n,d):null!=e&&o.fitBounds(e,t),null!=f&&o.whenReady(f),A(Object.freeze({__version:1,map:o}))}},[]);(0,o.useEffect)(()=>()=>{h?.map.remove()},[h]);let C=h?o.createElement(i,{value:h},r):s??null;return o.createElement("div",{...g,ref:y},C)});var c=n(8772);function f(e,t){let n=(0,o.useRef)(t);(0,o.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function d(e,t){let n=(0,o.useRef)(void 0);(0,o.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function p(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function m(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function g(e,t){return null==t?function(t,n){let r=(0,o.useRef)(void 0);return r.current||(r.current=e(t,n)),r}:function(n,r){let i=(0,o.useRef)(void 0);i.current||(i.current=e(n,r));let a=(0,o.useRef)(n),{instance:l}=i.current;return(0,o.useEffect)(function(){a.current!==n&&(t(l,n,a.current),a.current=n)},[l,n,t]),i}}function h(e){return function(t){var n;let r=a(),i=e(p(t,r),r);return f(r.map,t.attribution),d(i.current,t.eventHandlers),n=i.current,(0,o.useEffect)(function(){return(r.layerContainer??r.map).addLayer(n.instance),function(){r.layerContainer?.removeLayer(n.instance),r.map.removeLayer(n.instance)}},[r,n]),i}}let A=function(e,t){var n;return n=h(g(e,t)),(0,o.forwardRef)(function(e,t){let{instance:r}=n(e).current;return(0,o.useImperativeHandle)(t,()=>r),null})}(function({url:e,...t},n){return m(new l.TileLayer(e,p(t,n)),n)},function(e,t,n){let{opacity:r,zIndex:o}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=o&&o!==n.zIndex&&e.setZIndex(o);let{url:i}=t;null!=i&&i!==n.url&&e.setUrl(i)});n(5286),n(5194);let v=function(e,t){var n;return n=h(g(e,t)),(0,o.forwardRef)(function(e,t){let{instance:r,context:a}=n(e).current;(0,o.useImperativeHandle)(t,()=>r);let{children:l}=e;return null==l?null:o.createElement(i,{value:a},l)})}(function({position:e,...t},n){var r;let o=new l.Marker(e,t);return m(o,(r={overlayContainer:o},Object.freeze({...n,...r})))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),y=function(e,t){var n,r;return n=g(e),r=function(e,r){let o=a(),i=n(p(e,o),o);return f(o.map,e.attribution),d(i.current,e.eventHandlers),t(i.current,o,e,r),i},(0,o.forwardRef)(function(e,t){let[n,i]=(0,o.useState)(!1),{instance:a}=r(e,i).current;(0,o.useImperativeHandle)(t,()=>a),(0,o.useEffect)(function(){n&&a.update()},[a,n,e.children]);let l=a._contentNode;return l?(0,c.createPortal)(e.children,l):null})}(function(e,t){return m(new l.Popup(e,t.overlayContainer),t)},function(e,t,{position:n},r){(0,o.useEffect)(function(){let{instance:o}=e;function i(e){e.popup===o&&(o.update(),r(!0))}function a(e){e.popup===o&&r(!1)}return t.map.on({popupopen:i,popupclose:a}),null==t.overlayContainer?(null!=n&&o.setLatLng(n),o.openOn(t.map)):t.overlayContainer.bindPopup(o),function(){t.map.off({popupopen:i,popupclose:a}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(o)}},[e,t,r,n])});function C(){return a().map}function w(e){let{project:t}=e,n=a().map;return(0,r.jsx)(v,{position:[t.Latitude,t.Longitude],icon:function(){let{className:e="custom-marker",iconSize:t=[24,24],iconAnchor:n=[12,24],html:r=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u().divIcon({className:e,iconSize:t,iconAnchor:n,html:r})}(),eventHandlers:{click:()=>{n.flyTo([t.Latitude,t.Longitude],12,{duration:1.5,easeLinearity:.15})}},children:(0,r.jsxs)(y,{children:[(0,r.jsx)("strong",{children:t.ProjectCategory}),"A pretty CSS3 popup. ",(0,r.jsx)("br",{})," Easily customizable."]})})}function b(){let e=a().map,t=(0,o.useRef)(null),n=(0,o.useRef)(!1),r=(0,o.useRef)(!1),i=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(e){if(!u().TileLayer.Mask){console.log("CSSMaskedTileLayer: Mask plugin not loaded yet, waiting...");let e=()=>{u().TileLayer.Mask?(console.log("CSSMaskedTileLayer: Mask plugin now available"),o()):setTimeout(e,100)};e();return}o()}function o(){try{let o=new(u()).TileLayer.Mask("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{maskUrl:(()=>{let e=document.createElement("canvas");e.width=512,e.height=512;let t=e.getContext("2d");if(!t)return null;t.fillStyle="black",t.fillRect(0,0,512,512);let n=512/3,r=t.createRadialGradient(256,256,0,256,256,n);return r.addColorStop(0,"rgba(255, 255, 255, 1.0)"),r.addColorStop(.3,"rgba(255, 255, 255, 0.95)"),r.addColorStop(.5,"rgba(255, 255, 255, 0.8)"),r.addColorStop(.7,"rgba(255, 255, 255, 0.5)"),r.addColorStop(.85,"rgba(255, 255, 255, 0.2)"),r.addColorStop(1,"rgba(255, 255, 255, 0.0)"),t.fillStyle=r,t.beginPath(),t.arc(256,256,n,0,2*Math.PI),t.fill(),e.toDataURL()})(),maskSize:512,attribution:"&copy; Esri"});o.addTo(e),t.current=o;let a=u().point(-1e3,-1e3);o.setCenter(a);let l=()=>{if(t.current){let e=u().point(-1e3,-1e3);t.current.setCenter(e)}},s=()=>{t.current&&i.current&&!n.current&&t.current.setCenter(i.current)},c=e=>{i.current=e.containerPoint,t.current&&!n.current&&t.current.setCenter(e.containerPoint)},f=()=>{if(!n.current&&t.current){let n=e.getSize().divideBy(2);i.current=n,t.current.setCenter(n)}},d=()=>{l(),i.current=null},p=e.flyTo.bind(e);e.flyTo=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return console.log("FlyTo started - hiding mask"),r.current=!0,n.current=!0,l(),p(...t)};let m=()=>{r.current&&(console.log("FlyTo ended - ready to show mask again"),setTimeout(()=>{r.current=!1,n.current=!1,i.current&&s()},200))};return e.on("mousemove",c),e.on("mouseenter",f),e.on("mouseleave",d),e.on("moveend",m),()=>{e.flyTo=p,e.off("mousemove",c),e.off("mouseenter",f),e.off("mouseleave",d),e.off("moveend",m),t.current&&e.removeLayer(t.current)}}catch(e){console.error("CSSMaskedTileLayer: Error creating mask layer:",e)}}},[e]),null}function k(){let{projects:e,error:t}=function(){let[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(""),[i,a]=(0,o.useState)([]),[l,u]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("https://raw.githubusercontent.com/AdamFehse/map-app/gh-pages/storymapdata_db_ready_v2.json");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let n=await e.json();t(n);let r=[...new Set(n.map(e=>e.ProjectCategory).filter(Boolean))];a(r)}catch(e){e&&"object"==typeof e&&"message"in e?u(e.message):u("Unknown error")}})()},[]);let s=(0,o.useMemo)(()=>n?e.filter(e=>e.ProjectCategory===n):e,[e,n]),c=(0,o.useCallback)(e=>{r(e)},[]),f=(0,o.useCallback)(()=>e.filter(e=>e.Artworks&&e.Artworks.length>0),[e]),d=(0,o.useCallback)(()=>e.filter(e=>e.Poems&&e.Poems.length>0),[e]),p=(0,o.useCallback)(()=>{let t=new Set;return e.forEach(e=>{e.Activities&&e.Activities.forEach(e=>{t.add(e)})}),Array.from(t)},[e]);return{projects:e,filteredProjects:s,categories:i,error:l,filterProjects:c,getProjectsWithArtworks:f,getProjectsWithPoems:d,getUniqueActivities:p}}();return((0,o.useEffect)(()=>{let e=document.createElement("script");e.textContent='\n      (function() {\n        var defaultMaskUrl = [\n          \'data:image/png;base64,\',\n          \'iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEC0lEQVRYR7WX+YuVZRTHP09pZZot\',\n          \'WpiamktpUWJGC6GEoLigRIo/CFr/WgtqGqREuKRptBCUQmkqKuMSU+mMy4zOlOPUK5/LeeT1eu/c\',\n          \'9+rMAy/vMPfe53zP93zPlmjzFEWRAB/PA/EugNqTUvJd+eSLWv6gKAqNPQg8BDwc71EB5j9gALgR\',\n          \'78GUkv9reVoCCMMafAyYADwNTAQeB8YEgH+Ba8Bl4CJwCegB/mkFpCmAoFpvNTQVmBPPDOAZYDzw\',\n          \'SADQewF0A38Ap4GTwLkAcyOl9H8jOhoCCOOPAs8CLwOvA68AzwcLfjY6QuK9Xj6ox8DVAPE7cAj4\',\n          \'FTgPXG/Exl0AwvhYQE/fBBYD84HJwLiIfRZf+feKLwPpj1AcB74HfghGeupB3AGg5LmeanhpGJdy\',\n          \'6VaEVY5ADMsVQBAHgG+AY0BvORz1ABTbc8C7wCpgYcRbLbQUbB0yGTEshsRw7Ab2BhP9OV1vXxpq\',\n          \'V91vA+8Di4L2ezGesWQQZscvwBfAfqAzpXTTL5UBmFLzgPeA1aF4xdau5/UhEoTh6AT2AdsDjHqo\',\n          \'VTXCe/Nb6jcEC0+1EfNWulAT14HfgG3AV2ZGSmkwA5DmWcBaYB3wQhSZVhe387mUy4LGN5ueKaW+\',\n          \'DMC0U3AbgeXAJMAyO5xHFhSkKfkRcNAsSUH/E0H/h8A7wJPDEPtG4K0PhuET4EvgzwzAPNdzAciE\',\n          \'jNyv+BoBsFmdArYAnwNnBCDVUr4G2AS8OgLxz2DUwZnIBEGcygCs+RmANd+UHIkjgLP1AKzrMrAS\',\n          \'+ABYAAxH/jdywHpgp9wa6diRNWDOLwkNWAltwSOhAbvlUeBTYGetIkYDssu9EQzYgCxKVRtP1VBZ\',\n          \'EXuBn4CPoyp25zpgE3oRWB99YGaMXVUvr/I9G9MFYE8w8DNwuxDprTrQe0uxA4hhyH2/ioGhvqP3\',\n          \'1oATkX47gI6U0kC5GRkGBw9L8QpgerAwHFpQ/c6K3wKfAT86PzoXlAHkemBDsh2/FcOno9f9HKdj\',\n          \'Y28FVHi7agUoJYvSnUovisL8nw0si7S0JliWDdG9MKFxu6Cp93U0oiMxFdX2h/qJyJg7fjsXqAdT\',\n          \'07/tFTJRVRN5ENF4B/BdiO+wU3J5Lmw0lOqtApwbU5GTkSBMzTwXNgOiYb2WXjufnpt2dj5D0JUn\',\n          \'oRzTZmO5IGTC4fS1qBEvAVMCXD2QbDjvB3/H7OcYZrrZgBRdbQwrn6EWE71UE3quLmTBWjEtxCnA\',\n          \'PC96cV9sRg4dGnQCdjn5q9lOcJcG6tFFlTQ77A2uZdYK9wNBKc7cM1zNXMXcjDTo0xUCHBhqYa2k\',\n          \'7ACSF1NZ0bBhkAGPVU4Q1noLjhpwQW25KVcCUGYmJih/Z4jyqu64lTejtlb0W3sASziD1RhmAAAA\',\n          \'AElFTkSuQmCC\'\n        ].join("");\n\n        L.TileLayer.Mask = L.TileLayer.extend({\n          options: {\n            maskUrl: defaultMaskUrl,\n            maskSize: 512\n          },\n          getMaskSize: function() {\n            var s = this.options.maskSize;\n            return s instanceof L.Point ? s : new L.Point(s, s);\n          },\n          setCenter: function(containerPoint) {\n            if (arguments.length === 2) {\n              this.setCenter(L.point(arguments[0], arguments[1]));\n              return;\n            }\n            if (this._map) {\n              var p = this._map.containerPointToLayerPoint(containerPoint);\n              p = p.subtract(this.getMaskSize().divideBy(2));\n              this._image.setAttribute("x", p.x);\n              this._image.setAttribute("y", p.y);\n            }\n          },\n          _initContainer: function() {\n            if (this._container) return;\n            var rootGroup = this._map.getRenderer(this)._rootGroup;\n            var defs = rootGroup.appendChild(L.SVG.create("defs"));\n            var container = rootGroup.appendChild(L.SVG.create("g"));\n            var mask = defs.appendChild(L.SVG.create("mask"));\n            var image = mask.appendChild(L.SVG.create("image"));\n            var size = this.getMaskSize();\n            mask.setAttribute("id", "leaflet-tilelayer-mask-" + L.stamp(this));\n            mask.setAttribute("x", "-100%");\n            mask.setAttribute("y", "-100%");\n            mask.setAttribute("width", "300%");\n            mask.setAttribute("height", "300%");\n            image.setAttribute("width", size.x);\n            image.setAttribute("height", size.y);\n            image.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", this.options.maskUrl);\n            container.setAttribute("mask", "url(#" + mask.getAttribute("id") + ")");\n            this._container = container;\n            this._image = image;\n            this.setCenter(this._map.getSize().divideBy(2));\n          },\n          _updateLevels: function() {\n            var zoom = this._tileZoom;\n            if (zoom === undefined)\n              return undefined;\n\n            for (var z in this._levels) {\n              if (!this._levels[z].el.firstChild && z !== zoom) {\n                L.DomUtil.remove(this._levels[z].el);\n                this._removeTilesAtZoom(z);\n                delete this._levels[z];\n              }\n            }\n\n            var level = this._levels[zoom];\n            if (!level) {\n              var map = this._map;\n              level = {\n                el: this._container.appendChild(L.SVG.create("g")),\n                origin: map.project(map.unproject(map.getPixelOrigin()), zoom).round(),\n                zoom: zoom\n              };\n              this._setZoomTransform(level, map.getCenter(), map.getZoom());\n              L.Util.falseFn(level.el.offsetWidth);\n              this._levels[zoom] = level;\n            }\n            this._level = level;\n            return level;\n          },\n          _addTile: function(coords, container) {\n            var tilePos = this._getTilePos(coords);\n            var tileSize = this.getTileSize();\n            var key = this._tileCoordsToKey(coords);\n            var url = this.getTileUrl(this._wrapCoords(coords));\n\n            var tile = container.appendChild(L.SVG.create("image"));\n            tile.setAttribute("width", tileSize.x);\n            tile.setAttribute("height", tileSize.y);\n            tile.setAttribute("x", tilePos.x);\n            tile.setAttribute("y", tilePos.y);\n            tile.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", url);\n\n            this._tiles[key] = {\n              el: tile,\n              coords: coords,\n              current: true\n            };\n          },\n          _setZoomTransform: function(level, center, zoom) {\n            var scale = this._map.getZoomScale(zoom, level.zoom),\n              translate = level.origin.multiplyBy(scale)\n              .subtract(this._map._getNewPixelOrigin(center, zoom)).round();\n            level.el.setAttribute("transform", "translate(" + translate.x + "," + translate.y + ")");\n          }\n        });\n\n        L.tileLayer.mask = function(url, options) {\n          return new L.TileLayer.Mask(url, options);\n        };\n\n      })();\n    ',document.body.appendChild(e)},[]),t)?(0,r.jsxs)("div",{children:["Error: ",t]}):e.length?(0,r.jsxs)(s,{center:[31.313354,-110.945987],zoom:7,style:{height:"100vh",width:"100%"},children:[(0,r.jsx)(A,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),(0,r.jsx)(b,{}),e.map((e,t)=>(0,r.jsx)(w,{project:e},t))]}):(0,r.jsx)("div",{children:"Loading..."})}},5194:()=>{},5286:()=>{}}]);
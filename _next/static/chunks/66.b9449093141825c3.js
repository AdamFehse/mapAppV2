(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{1946:(t,e,r)=>{"use strict";r.d(e,{Y:()=>a});var o=r(9242);function a(){let[t,e]=(0,o.useState)([]),[r,a]=(0,o.useState)(""),[n,l]=(0,o.useState)([]),[s,c]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{try{let t=await fetch("https://raw.githubusercontent.com/AdamFehse/map-app/gh-pages/storymapdata_db_ready_v2.json");if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let r=await t.json();e(r);let o=[...new Set(r.map(t=>t.ProjectCategory).filter(Boolean))];l(o)}catch(t){t&&"object"==typeof t&&"message"in t?c(t.message):c("Unknown error")}})()},[]);let i=(0,o.useMemo)(()=>r?t.filter(t=>t.ProjectCategory===r):t,[t,r]),u=(0,o.useCallback)(t=>{a(t)},[]),f=(0,o.useCallback)(()=>t.filter(t=>t.Artworks&&t.Artworks.length>0),[t]),y=(0,o.useCallback)(()=>t.filter(t=>t.Poems&&t.Poems.length>0),[t]),p=(0,o.useCallback)(()=>{let e=new Set;return t.forEach(t=>{t.Activities&&t.Activities.forEach(t=>{e.add(t)})}),Array.from(e)},[t]);return{projects:t,filteredProjects:i,categories:n,error:s,filterProjects:u,getProjectsWithArtworks:f,getProjectsWithPoems:y,getUniqueActivities:p}}},2066:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>p});var o=r(6658),a=r(9242),n=r(6956),l=r(4361),s=r(3832);r(5286),r(5194);var c=r(1946),i=r(3193),u=r(523),f=r.n(u);function y(){let t=(0,n.ko)(),e=(0,a.useRef)(null),r=(0,a.useRef)(null),o=(0,a.useRef)(null),{projects:l}=(0,c.Y)();return(0,a.useEffect)(()=>{if(!t||!l.length)return;let a=f().svg();a.addTo(t);let n=l.map((t,e)=>({project:t,long:t.Longitude,lat:t.Latitude,value:8+e%3,x0:0,y0:0,x:0,y:0}));n.forEach(function(e){let r=t.latLngToLayerPoint([e.lat,e.long]);e.x0=r.x,e.y0=r.y});let s=i.Ltv(t.getPanes().overlayPane).select("svg");e.current=s.node();let c=s.selectAll("circle").attr("class","Dots").data(n).join("circle").attr("id","dotties").attr("cx",t=>t.x).attr("cy",t=>t.y).attr("r",t=>t.value).style("fill","blue").attr("stroke","blue").attr("stroke-width",3).attr("fill-opacity",.4).style("cursor","pointer").on("click",function(e,r){f().popup().setLatLng([r.lat,r.long]).setContent("\n            <strong>".concat(r.project.ProjectCategory,"</strong>\n            <br />\n            A pretty CSS3 popup. <br /> Easily customizable.\n          ")).openOn(t)}).on("mouseover",function(){i.Ltv(this).style("fill","#1976d2").attr("fill-opacity",.7)}).on("mouseout",function(){i.Ltv(this).style("fill","blue").attr("fill-opacity",.4)});o.current=c;let u=i.tXi(n).force("x",i.KS8().x(t=>t.x0)).force("y",i.TSS().y(t=>t.y0)).force("collide",i.eRw(t=>1.2*t.value)).on("tick",()=>{c.attr("cx",t=>t.x).attr("cy",t=>t.y)}).tick(300);r.current=u;let y=function(){n.forEach(function(e){let r=t.latLngToLayerPoint([e.lat,e.long]);e.x0=r.x,e.y0=r.y,u.force("x",i.KS8().x(t=>t.x0)).force("y",i.TSS().y(t=>t.y0))}),u.alpha(1).restart()};return t.on("zoomend",y),()=>{t.off("zoomend",y),r.current&&r.current.stop(),o.current&&o.current.remove(),t.removeLayer(a)}},[t,l]),null}function p(){let{projects:t,error:e}=(0,c.Y)();return e?(0,o.jsxs)("div",{children:["Error: ",e]}):t.length?(0,o.jsxs)(l.W,{center:[31.313354,-110.945987],zoom:6,style:{height:"100vh",width:"100%"},zoomControl:!1,children:[(0,o.jsx)(s.e,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',minZoom:0,maxZoom:16}),(0,o.jsx)(y,{})]}):(0,o.jsx)("div",{children:"Loading..."})}},5194:()=>{}}]);